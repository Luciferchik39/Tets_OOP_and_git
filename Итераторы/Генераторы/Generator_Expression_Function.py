"""
Если спрашивают про общую концепцию:
«Генератор — это итератор особого типа. Он позволяет лениво (то есть по одному, по мере необходимости) генерировать
последовательность значений, не храня всю последовательность в памяти целиком. Это повышает эффективность
при работе с большими данными и бесконечными потоками.»

Если спрашивают про способы создания (как в вашем видео):

«В Python есть два основных способа создать генератор. Первый — генераторное выражение, например:
(x for x in range(10)). Это аналог спискового включения. Второй, более мощный — функция-генератор,
которая определяется как обычная функция, но использует ключевое слово yield для выдачи значений и
запоминания своего состояния. В обоих случаях мы получаем объект-генератор.»
"""


# Это генераторное выражение. Оно создает объект-генератор.
my_gen = (x * 2 for x in [1, 2, 3, 4, 5])
print(my_gen)
# Вывод: <generator object <genexpr> at 0x...>  # Вот он, "generator object"!


"с объектом my_gen мы можем взаимодействаать по разному"
print(f'Мы передаём наш объект my_gen в next для получения объекта из generator object и получаем: {next(my_gen)}')
print(f'так как generator object исчерпывается и мы получили одно его значение при превращение его в лист мы получим все оставшиеся объекты {list(my_gen)}')


my_gen = (x * 2 for x in [1, 2, 3, 4, 5])
# sum() - сумма всех элементов
print(sum(my_gen))  # 30 (2+4+6+8+10)

my_gen = (x * 2 for x in [1, 2, 3, 4, 5])
# any() - есть ли хотя бы один True (в данном случае > 5)
print(any(x > 5 for x in my_gen))  # True (6,8,10 > 5)


my_gen = (x * 2 for x in [1, 2, 3])
print(dir(my_gen))  # Покажет все методы, включая __next__, send, throw, close
print(hasattr(my_gen, '__next__'))  # True - это итератор
print(hasattr(my_gen, 'send'))  # True - это генератор


def read_large_file():
    for i in range(1000000):
        yield str(i) + '\n'

# Генераторное выражение для обработки
lines = read_large_file()
numbers = (int(line.strip()) for line in lines)  # Конвертируем в числа
squared = (n ** 2 for n in numbers)  # Возводим в квадрат
filtered = (x for x in squared if x % 2 == 0)  # Только четные

# Берем только первые 5 результатов
for i, val in enumerate(filtered):
    if i >= 5:
        break
    print(val)
# Вывод: 0, 4, 16, 36, 64


"""Generator_Function"""


# Это определение функции-генератора.
def gen_funk(nums):
    print('Генератор запущен!')
    try:
        for num in range(nums):
            print("пошла итерация")
            yield print(f'вывод генератора {num * 10}')
            print("продолжаем итерацию")
    except StopIteration:
        print('Итерация заверешна, получили все объекты из generator object')

a = gen_funk(3)
next(a)
print('Пу пу пу')
next(a)
print('Пу пу пу')
next(a)
print('Пу пу пу')
